{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "GTasks Todo Manager Configuration",
  "description": "Schema for OAuth credentials and multi-account configuration storage",
  "type": "object",
  "additionalProperties": false,
  "required": ["oauth", "accounts"],
  "properties": {
    "oauth": {
      "type": "object",
      "description": "OAuth 2.0 client credentials from Google Cloud Console",
      "additionalProperties": false,
      "required": ["clientId", "clientSecret"],
      "properties": {
        "clientId": {
          "type": "string",
          "description": "OAuth 2.0 Client ID from Google Cloud Console",
          "minLength": 1
        },
        "clientSecret": {
          "type": "string",
          "description": "OAuth 2.0 Client Secret from Google Cloud Console",
          "minLength": 1
        },
        "redirectUri": {
          "type": "string",
          "description": "OAuth redirect URI, defaults to localhost for desktop apps",
          "default": "http://localhost:3000/oauth/callback"
        }
      }
    },
    "accounts": {
      "type": "array",
      "description": "List of authenticated Google accounts",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["email", "tokens"],
        "properties": {
          "email": {
            "type": "string",
            "description": "Google account email address",
            "format": "email"
          },
          "displayName": {
            "type": "string",
            "description": "User's display name from Google profile"
          },
          "tokens": {
            "type": "object",
            "description": "OAuth tokens for this account (encrypted at rest)",
            "additionalProperties": false,
            "required": ["accessToken", "refreshToken", "expiresAt"],
            "properties": {
              "accessToken": {
                "type": "string",
                "description": "Current access token (encrypted)"
              },
              "refreshToken": {
                "type": "string",
                "description": "Refresh token for obtaining new access tokens (encrypted)"
              },
              "expiresAt": {
                "type": "integer",
                "description": "Access token expiration timestamp (Unix epoch ms)"
              },
              "scope": {
                "type": "string",
                "description": "OAuth scopes granted for this account"
              }
            }
          },
          "addedAt": {
            "type": "string",
            "description": "ISO 8601 timestamp when account was added",
            "format": "date-time"
          },
          "lastUsed": {
            "type": "string",
            "description": "ISO 8601 timestamp of last API call with this account",
            "format": "date-time"
          },
          "status": {
            "type": "string",
            "description": "Current connection status",
            "enum": ["active", "expired", "revoked", "error"]
          }
        }
      }
    },
    "settings": {
      "type": "object",
      "description": "User preferences and settings",
      "additionalProperties": false,
      "properties": {
        "defaultAccount": {
          "type": "string",
          "description": "Email of default account for operations",
          "format": "email"
        },
        "outputFormat": {
          "type": "string",
          "description": "Default output format for CLI commands",
          "enum": ["json", "table", "minimal"],
          "default": "table"
        },
        "encryptionKeyPath": {
          "type": "string",
          "description": "Path to encryption key file for token storage"
        }
      }
    }
  }
}
